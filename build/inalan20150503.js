/*
*
* Copyright (c) 2015- Ladislav Vegh, Komarno, Slovakia
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*
*/
var inalan=inalan||{};inalan.Stage=function(a){this.canvas=document.getElementById("myCanvas");this.ctx=this.canvas.getContext("2d");this.visuData={}};inalan.Stage.prototype.render=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var a in this.visuData){if(this.visuData.hasOwnProperty(a)){this.visuData[a].render()}}};inalan.Stage.prototype.add=function(a){if(typeof(this.visuData[a.name])!="undefined"){throw"- Can not add '"+a.name+"' to the stage, object with this name already exists on the stage."}a.ctx=this.ctx;this.visuData[a.name]=a};var inalan=inalan||{};inalan.VisuData=function(a){this.x=0;this.y=0;this.name=a};inalan.VisuData.prototype.render=function(){if(!(this.ctx instanceof CanvasRenderingContext2D)){throw"- Can not render '"+this.name+"', first you must add it to a stage."}};var inalan=inalan||{};inalan.VisuVariable=function(a,b){inalan.VisuData.call(this,a);if(b<0){throw"- the value of '"+a+"' must be >= 0"}this.value=b;this.minValue=0;this.maxValue=b>150?b:150;this.color="#C00";this.width=20;this.height=this.maxValue;this.textRotation=0;this.changable=true};inalan.VisuVariable.prototype=Object.create(inalan.VisuData.prototype);inalan.VisuVariable.prototype.constructor=inalan.VisuVariable;inalan.VisuVariable.prototype.render=function(){inalan.VisuData.prototype.render.call(this);this.ctx.fillStyle="#EEE";this.ctx.fillRect(this.x,this.y,this.width+1,this.height);this.ctx.fillStyle=this.color;this.ctx.fillRect(this.x,this.y+(this.height-this.value),this.width,this.value);this.ctx.beginPath();this.ctx.moveTo(this.x-2,this.y+0.5+this.height);this.ctx.lineTo(this.x+23,this.y+0.5+this.height);this.ctx.stroke();this.ctx.strokeRect(this.x+0.5,this.y+0.5+(this.height-this.value),this.width,this.value);this.ctx.fillStyle="#000";this.ctx.font="12px Arial";if(this.textRotation==0){this.ctx.textAlign="center";this.ctx.fillText(this.name,this.x+this.width/2,this.y+this.height+14)}else{this.ctx.save();this.ctx.translate(this.x+this.width/2,this.y+this.height+14);this.ctx.rotate(-Math.PI/180*this.textRotation);this.ctx.textAlign="right";this.ctx.fillText(this.name,8,4);this.ctx.restore()}if(this.changable){}};var inalan=inalan||{};inalan.VisuArray=function(b,a){inalan.VisuData.call(this,b);this.elements={length:a.length};for(var c=0;c<a.length;c++){this.elements[c]=new inalan.VisuVariable(b+"["+c+"]",a[c]);this.elements[c].textRotation=45}};inalan.VisuArray.prototype=Object.create(inalan.VisuData.prototype);inalan.VisuArray.prototype.constructor=inalan.VisuArray;inalan.VisuArray.prototype.render=function(){inalan.VisuData.prototype.render.call(this);var b=this.elements[0].height;for(var a=0;a<this.elements.length;a++){if(this.elements[a].height>b){b=this.elements[a].height}}for(var a=0;a<this.elements.length;a++){this.elements[a].ctx=this.ctx;this.elements[a].x=this.x+a*22;this.elements[a].y=this.y;this.elements[a].height=b;this.elements[a].render()}};